[pytest]
testpaths = test
norecursedirs = _archived .git __pycache__ _wip
pythonpath = .
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Performance & Safety
timeout = 60
timeout_method = thread
addopts = -v --tb=short --strict-markers --maxfail=20

# Marker Definitions - PERMANENT (CAD-Kernel-First)
markers =
    kernel: Core OCP/build123d operations (permanent)
    tnp: Topology Naming Protocol tests (permanent)
    solver: Constraint solver tests (permanent)
    boolean: Boolean operation tests (permanent)
    regression: Regression tests (permanent)
    contract: API contract tests (permanent)
    
    # TEMPORARY
    wip: Work in progress - not for CI (temporary)
    experimental: Experimental feature tests (temporary)
    debug: Debug helper tests (temporary)
    flaky: Known flaky tests - quarantined (temporary)
    
    # PERFORMANCE
    fast: Tests under 1 second
    medium: Tests 1-10 seconds
    slow: Tests over 10 seconds (skip in fast gate)
    
    # INFRASTRUCTURE
    headless: Tests that run without display
    gui: Tests requiring Qt/display
    ocp: Tests using OCP directly
    io: Tests with file I/O
    
    # LEGACY (for migration)
    unit: Unit tests
    integration: Integration tests

# Log configuration
log_cli = false
log_cli_level = WARNING

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore:.*numpy.*:DeprecationWarning
