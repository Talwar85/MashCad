# PROMPT_20260215_ai3_w1

Du bist AI-3 (QA/Release Cell) auf Branch `feature/v1-ux-aiB`.

Lies zuerst:
- `handoffs/HANDOFF_20260215_core_to_ai3_w1.md`
- `handoffs/HANDOFF_20260215_core_to_gemini_w4.md`
- `handoffs/HANDOFF_20260215_core_to_gemini_w5.md`

## Harte Regeln
1. Keine Edits in:
- `modeling/**`
- `gui/main_window.py`
- `gui/viewport_pyvista.py`

2. Fokus auf QA/Gates/Regression-Infrastruktur:
- `test/**`
- `roadmap_ctp/**`
- optionale Gate-Skripte/Doku

3. Keine Placeholders, keine "nur Text"-Aussagen ohne Repro-Command.

## Aufgaben (in Reihenfolge)
### 1) Flaky/Crash Burn-Down (P0)
- Analysiere und dokumentiere reproduzierbar:
  - `test/test_ui_abort_logic.py`
  - `test/harness/test_interaction_consistency.py`
- Erstelle eine Ursachenmatrix in `roadmap_ctp/`.

### 2) Gate-Automatisierung (P0)
- Definiere und dokumentiere:
  - `core-gate`
  - `ui-gate`
- Falls nötig, kleine Runner-Dateien ergänzen.

### 3) Regression-Pack Pflege (P0)
- Stelle sicher, dass diese Suiten im Gate enthalten sind:
  - `test/test_feature_edit_robustness.py`
  - `test/test_project_roundtrip_persistence.py`
  - `test/test_tnp_v4_feature_refs.py`
  - `test/test_feature_error_status.py`

### 4) Error-Code Mapping QA (P1)
- Prüfe UI-Abdeckung für Codes:
  - `tnp_ref_missing`
  - `tnp_ref_mismatch`
  - `tnp_ref_drift`
  - `rebuild_finalize_failed`
  - `ocp_api_unavailable`
- Liefere Report mit Gaps.

### 5) Workspace-Hygiene Gate (P1)
- Sichtbarkeit/Check für untracked Debug/Temp-Files etablieren.

## Pflicht-Validierung
```powershell
conda run -n cad_env python -m pytest -q test/test_feature_error_status.py test/test_tnp_v4_feature_refs.py test/test_project_roundtrip_persistence.py test/test_feature_edit_robustness.py
conda run -n cad_env python -m pytest -q test/test_ui_abort_logic.py test/harness/test_interaction_consistency.py
```

## Rueckgabeformat
- Datei: `handoffs/HANDOFF_YYYYMMDD_ai3_w1.md`
- Struktur:
  1. Problem
  2. API/Behavior Contract
  3. Impact
  4. Validation
  5. Breaking Changes / Rest-Risiken
- Plus: kurze Liste mit den nächsten 3 priorisierten Folgeaufgaben.
